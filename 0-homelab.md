---
title: Day 0 HomeLab - Setting Up OPNsense Again for the First Time in a While
description: Setting back up OPNSense
date: 2025-08-25
categories: [Homelab, OPNSense, NGNINX]
author: moses
tags: [homelab, opnsense, nginx]
hideToc: true
---

A long time ago in a galaxy far far away... there was a homelab...
and it had gown rather lonely...

Note the following was generated by AI from my original article.

# Setting Up OPNsense Again for the First Time in a While

It's always refreshing to return to open-source networking projects
after some time away. OPNsense, in particular, is one of those tools
that rewards a careful, methodical setup process. Whether you're dusting
off an old box, repurposing hardware, or spinning up a virtual
appliance, the steps for a clean deployment remain familiar yet nuanced.

In this article, I'll walk through the process of setting up OPNsense
again from scratch --- with reminders, best practices, and lessons that
come from having set it up many times before.

------------------------------------------------------------------------

## 1. Preparing Hardware or Virtual Environment

Before diving in, decide where OPNsense will live:

-   **Dedicated hardware firewall**: A small form-factor PC with at
    least two NICs works well. Intel NICs are still the most reliable
    choice. Here are two good options on Amazon: [two port mini pc](https://a.co/d/8ccFBUG) or [4 port mini pc](https://a.co/d/2VeD6kJ)
-   **Virtualized environment**: Proxmox, ESXi, or even VirtualBox for
    testing. Allocate at least 2 GB RAM and 20 GB storage.
-   **Cloud deployment**: Some providers allow OPNsense images, but for
    this guide we'll focus on local/virtual setups.

**Pro Tip:** Always double-check that your WAN and LAN interfaces are
clearly identified. It's easy to mix these up after a long break.

------------------------------------------------------------------------

## 2. Installing OPNsense

Download the latest OPNsense ISO image from the official site and create
a bootable USB (for hardware) or mount the ISO in your hypervisor.

During install, you'll: - Choose **Install (ZFS or UFS)** -- ZFS if your
hardware supports it for resilience. - Set root password. - Assign
initial interfaces (WAN/LAN).

At the end, you'll reboot into a clean OPNsense system with a console
menu.

------------------------------------------------------------------------

## 3. Initial Console Setup

The console menu is straightforward but worth refreshing: - **Option
1**: Assign interfaces. - **Option 2**: Set interface IP addresses. -
**Option 8**: Drop into shell for troubleshooting.

Assign your **LAN interface an IP** (e.g., `192.168.1.1/24`) and enable
DHCP so your laptop can connect easily.

------------------------------------------------------------------------

## 4. First Web Interface Login

Point your browser to the LAN IP (default is usually
https://192.168.1.1). Login with: - **Username:** root - **Password:**
what you set during install

From here, OPNsense will launch the **Setup Wizard**.

Steps include: - Setting hostname/domain. - Configuring WAN (DHCP,
Static, or PPPoE). - Defining LAN network. - Setting up DNS servers. -
Choosing whether to block RFC1918/private networks on WAN.

------------------------------------------------------------------------

## 5. Updating Before Anything Else

One of the first things to do --- and easy to forget after time away ---
is **System → Firmware → Updates**.

Run updates until the system reports clean. This ensures security
patches and package updates are in place before exposing your firewall
to the internet.

------------------------------------------------------------------------

## 6. Essential Configuration

Once you're patched, configure the essentials:

-   **Firewall Rules**: By default, LAN is allowed out, WAN is denied
    in. Add rules carefully and document them.
-   **NAT/Port Forwarding**: If hosting services (VPN, web server,
    etc.), set these up under *Firewall → NAT*.
-   **User Accounts**: Don't rely solely on root. Add an admin account
    with limited privileges.
-   **Time & NTP**: Set correct time for logging and TLS.

We will make this easier in the future by using Terraform for infrasture as code.

------------------------------------------------------------------------

## 7. Installing Plugins

One of OPNsense's strengths is its plugin ecosystem. Common ones worth
re-adding: - **os-acme-client**: Let's Encrypt certificates. -
**os-wireguard** or **os-openvpn**: For secure VPN access. -
**os-ddclient**: For dynamic DNS. - **os-upnp**: If you need
gaming/console NAT traversal.

------------------------------------------------------------------------

## 8. Backup & Best Practices

Finally, make sure you don't have to repeat this setup from scratch
again: - **System → Configuration → Backups** lets you export your
config XML. - Store it securely (encrypted if possible). - Consider
enabling **automatic backups to Nextcloud/Google Drive** via plugins.

------------------------------------------------------------------------

## Closing Thoughts

Coming back to OPNsense after time away is like meeting an old friend:
familiar, reliable, and powerful once you fall back into rhythm. The
initial setup may feel daunting if it's been months (or years), but once
you walk through these steps, you'll be reminded why OPNsense is a
favorite among open-source firewalls.

Next time, I'll cover **advanced configurations** like VLANs, IDS/IPS,
and integrating OPNsense with a home lab cluster.
